<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}" style="height: 100%;">

{% include head.html %}

<body class="site" style="display: flex; flex-direction: column; min-height: 100vh; margin: 0;">
  <style>
    body::before {
      content: "";
      position: fixed; /* Ensures the background covers the viewport and stays fixed during scrolling */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%; /* Changed from auto to 100% to cover the full viewport height */
      background: url("{{ page.background_image }}") no-repeat center center/cover;
      background-size: cover;
      opacity: 0.75;
      z-index: -2;
    }

    .overlay {
      position: fixed; /* Changed to fixed to cover the viewport and stay in place while scrolling */
      top: 0;
      left: 25%;
      width: 50%;
      height: 100%; /* Ensures the overlay extends to the full height of the viewport */
      background: rgba(255, 255, 255, 0.85);
      z-index: -1;
    }

    .site-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      max-width: 45%;
      margin: 0 auto;
      padding: 2rem 1rem;
      z-index: 1;
    }

    footer.site-footer {
      margin-top: auto;
      width: 100%;
      z-index: 1;
      padding: 0;
    }

/* Responsive adjustments */
@media (max-width: 768px) {
  .site-content, .site-header, .site-footer {
    max-width: 90%;
    padding: 1rem;
  }

  .site-header {
    position: relative; /* Ensure z-index is effective */
    z-index: 2; /* Higher than .site-content and .overlay */
    font-size: 0.8rem; /* Smaller font size for mobile headers */
  }

  .site-header h1 {
    font-size: 0.9rem; /* Adjust the main heading size if needed */
  }

  .site-content h1 {
    font-size: 1.9rem; /* Adjust the main heading size if needed */
  }

  .site-content h2 {
    font-size: 1.8rem; /* Adjust the main heading size if needed */
  }
  
  .site-content h3 {
    font-size: 1.6rem; /* Adjust the main heading size if needed */
  }

  .site-footer {
    font-size: 0.8rem; /* Smaller font size for mobile footers */
  }

  .site-content {
    position: relative; /* Ensure z-index is effective */
    z-index: 1; /* Ensures content is above the background but below the header */
    padding: 1rem; /* Adjust content padding for mobile */
  }

  .overlay {
    left: 10%;
    width: 80%;
    position: relative; /* Ensure z-index is effective */
    background: rgba(255, 255, 255, 0.85);
    z-index: -1; /* Same level as .site-content, but below .site-header */
  }
}
</style>

  <div class="overlay"></div>
  
  <header class="site-header" role="banner">
    {% include header.html %}
  </header>

  <main class="site-content" role="main">
    {{ content }}
  </main>

  <footer class="site-footer" role="contentinfo">
    {% include footer.html %}
  </footer>
</body>

</html>
